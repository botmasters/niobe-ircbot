var csv = require('csv'),
  sqlite3 = require('sqlite3'),
  db = new sqlite3.Database('exploits.db'),
  count = 0;

csv()
  .fromPath('./files.csv')
  .on('data', function(data, index) {
    var stmt = db.prepare('INSERT INTO files (id, file, description, date, author, platform, type, port) VALUES (?, ?, ?, ?, ?, ?, ?, ?)');
    stmt.run(data[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], function(result) {
      count++;
      if (count % 100 == 0) {
        console.log(count + ' fields imported ...');
      }
    });
  })
  .on('error', function(error) {
    console.log('[ERROR] ' + error.message);
  });